<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android: Tu Primer Dispositivo Inteligente</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        android: {
                            light: '#a4f6a5',
                            DEFAULT: '#3DDC84',
                            dark: '#008040'
                        },
                        dark: {
                            900: '#0f172a',
                            800: '#1e293b',
                            700: '#334155'
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #0f172a; color: white; overflow-x: hidden; }
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(61, 220, 132, 0.2);
        }
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        .gradient-text {
            background: linear-gradient(90deg, #3DDC84, #a4f6a5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .glow { box-shadow: 0 0 40px rgba(61, 220, 132, 0.4); }
    </style>
</head>
<body class="antialiased">

    <!-- Hero Section -->
    <header class="relative min-h-screen flex items-center justify-center overflow-hidden py-20">
        <!-- Background Elements -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0">
            <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-android rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-pulse-slow"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-[128px] opacity-20"></div>
        </div>

        <div class="container mx-auto px-6 relative z-10 text-center flex flex-col items-center">
            <div class="w-24 h-24 bg-android rounded-full flex items-center justify-center glow mb-8 animate-float">
                <i data-lucide="heart-handshake" class="text-dark-900 w-14 h-14"></i>
            </div>
            <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight">
                Elige lo <span class="gradient-text">Fácil</span>.<br>Elige Android.
            </h1>
            <p class="text-xl md:text-2xl text-gray-300 mb-10 max-w-3xl">
                Tu primer paso al mundo digital no tiene que ser complicado. Descubre el teléfono diseñado para ayudarte, guiarte y conectarte con los que amas.
            </p>
            <a href="#ventajas" class="bg-android text-dark-900 font-bold text-lg px-8 py-4 rounded-full hover:bg-android-light transition-all transform hover:scale-105 shadow-[0_0_20px_rgba(61,220,132,0.5)] flex items-center gap-2">
                Ver lo fácil que es <i data-lucide="arrow-down-circle"></i>
            </a>
        </div>
    </header>

    <!-- Banner Accesibilidad -->
    <section class="bg-gradient-to-r from-android-dark to-android py-12 px-6 relative z-20 shadow-2xl">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between reveal">
            <div class="mb-6 md:mb-0 md:mr-8 text-center md:text-left">
                <h2 class="text-3xl font-bold text-dark-900 mb-2">Tecnología para Todos los Presupuestos.</h2>
                <p class="text-dark-900 text-lg font-medium opacity-90">No necesitas gastar una fortuna para tener un buen teléfono. Con Android, puedes elegir entre cientos de opciones económicas que hacen exactamente lo mismo que los teléfonos más caros.</p>
            </div>
            <div class="flex-shrink-0">
                <div class="bg-dark-900 text-android px-6 py-3 rounded-xl font-bold text-2xl flex items-center gap-3">
                    <i data-lucide="wallet"></i> Amigable con tu bolsillo
                </div>
            </div>
        </div>
    </section>

    <!-- 5 Pilares para Principiantes -->
    <section id="ventajas" class="py-24 relative">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20 reveal">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">¿Por qué Android es ideal para empezar?</h2>
                <div class="w-24 h-1 bg-android mx-auto rounded-full mt-4"></div>
            </div>

            <div class="space-y-24 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-android before:to-transparent">
                
                <!-- 1. Fácil de Aprender -->
                <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active reveal">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full border-4 border-dark-900 bg-android text-dark-900 font-bold shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-[0_0_15px_rgba(61,220,132,0.5)] absolute left-0 md:left-1/2 transform -translate-x-1/2">
                        <i data-lucide="smile" class="w-5 h-5"></i>
                    </div>
                    <div class="w-[calc(100%-4rem)] md:w-[calc(50%-3rem)] pl-8 md:pl-0 glass-card p-8 rounded-2xl hover:border-android transition-colors">
                        <div class="text-android font-bold tracking-wider uppercase text-sm mb-2 flex items-center gap-2">
                            <i data-lucide="zoom-in" class="w-4 h-4"></i> A tu medida
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Letras e Iconos Gigantes</h3>
                        <p class="text-gray-400 leading-relaxed">¿Te cuesta leer la pantalla? No hay problema. En Android puedes activar el "Modo Fácil" para que las letras sean grandes, los botones sean claros y solo veas lo que realmente necesitas: llamadas, mensajes y fotos. Sin complicaciones.</p>
                    </div>
                </div>

                <!-- 2. Asistente de Voz -->
                <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active reveal">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full border-4 border-dark-900 bg-android text-dark-900 font-bold shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-[0_0_15px_rgba(61,220,132,0.5)] absolute left-0 md:left-1/2 transform -translate-x-1/2">
                        <i data-lucide="mic" class="w-5 h-5"></i>
                    </div>
                    <div class="w-[calc(100%-4rem)] md:w-[calc(50%-3rem)] pl-8 md:pl-0 glass-card p-8 rounded-2xl hover:border-android transition-colors text-left md:text-right md:pr-8">
                        <div class="text-android font-bold tracking-wider uppercase text-sm mb-2 flex items-center gap-2 md:justify-end">
                            <i data-lucide="message-circle" class="w-4 h-4"></i> Tu voz es el control
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Pídelo Hablando</h3>
                        <p class="text-gray-400 leading-relaxed">¿No te gusta escribir en teclados pequeños? Solo dile a tu teléfono: <i>"Llama a María"</i>, <i>"Pon música de Julio Iglesias"</i> o <i>"¿Va a llover hoy?"</i>. El Asistente de Google lo hará por ti al instante, sin que tengas que tocar nada.</p>
                    </div>
                </div>

                <!-- 3. Seguridad Automática -->
                <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active reveal">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full border-4 border-dark-900 bg-android text-dark-900 font-bold shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-[0_0_15px_rgba(61,220,132,0.5)] absolute left-0 md:left-1/2 transform -translate-x-1/2">
                        <i data-lucide="shield" class="w-5 h-5"></i>
                    </div>
                    <div class="w-[calc(100%-4rem)] md:w-[calc(50%-3rem)] pl-8 md:pl-0 glass-card p-8 rounded-2xl hover:border-android transition-colors">
                        <div class="text-android font-bold tracking-wider uppercase text-sm mb-2 flex items-center gap-2">
                            <i data-lucide="check-square" class="w-4 h-4"></i> Cero preocupaciones
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Tranquilidad Total</h3>
                        <p class="text-gray-400 leading-relaxed">Es normal tener miedo a "romper algo" o a los virus. Android trae una función llamada Play Protect que revisa todo automáticamente para que no descargues nada dañino. Siéntete libre de explorar, el teléfono te cuida.</p>
                    </div>
                </div>

                <!-- 4. Acompañamiento -->
                <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active reveal">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full border-4 border-dark-900 bg-android text-dark-900 font-bold shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-[0_0_15px_rgba(61,220,132,0.5)] absolute left-0 md:left-1/2 transform -translate-x-1/2">
                        <i data-lucide="users" class="w-5 h-5"></i>
                    </div>
                    <div class="w-[calc(100%-4rem)] md:w-[calc(50%-3rem)] pl-8 md:pl-0 glass-card p-8 rounded-2xl hover:border-android transition-colors text-left md:text-right md:pr-8">
                        <div class="text-android font-bold tracking-wider uppercase text-sm mb-2 flex items-center gap-2 md:justify-end">
                            <i data-lucide="help-circle" class="w-4 h-4"></i> Nunca estarás solo
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Ayuda Fácil de Encontrar</h3>
                        <p class="text-gray-400 leading-relaxed">Como casi todo el mundo usa Android, si alguna vez no sabes cómo enviar una foto o hacer una videollamada, cualquier familiar, amigo o vecino sabrá ayudarte en segundos. Es el sistema más popular del planeta.</p>
                    </div>
                </div>

                <!-- 5. Listo para Usar -->
                <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active reveal">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full border-4 border-dark-900 bg-android text-dark-900 font-bold shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-[0_0_15px_rgba(61,220,132,0.5)] absolute left-0 md:left-1/2 transform -translate-x-1/2">
                        <i data-lucide="power" class="w-5 h-5"></i>
                    </div>
                    <div class="w-[calc(100%-4rem)] md:w-[calc(50%-3rem)] pl-8 md:pl-0 glass-card p-8 rounded-2xl hover:border-android transition-colors">
                        <div class="text-android font-bold tracking-wider uppercase text-sm mb-2 flex items-center gap-2">
                            <i data-lucide="check" class="w-4 h-4"></i> Encender y listo
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Todo lo de Google, Integrado</h3>
                        <p class="text-gray-400 leading-relaxed">Apenas lo enciendes, ya tienes YouTube para ver videos, Google Maps para no perderte, y WhatsApp listo para descargar y hablar con tus seres queridos. Todo conectado mágicamente.</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Comparativa: ¿Por qué no otras opciones? -->
    <section id="comparativa" class="py-24 relative bg-dark-800/50 border-y border-gray-800 shadow-2xl">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 reveal">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">¿Por qué empezar con Android?</h2>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">Te mostramos la diferencia entre Android y otras opciones que suelen ser más difíciles y caras.</p>
                <div class="w-24 h-1 bg-android mx-auto rounded-full mt-6"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- Tarjeta Android (Destacada) -->
                <div class="glass-card p-8 md:p-10 rounded-3xl border-t-4 border-t-android reveal relative overflow-hidden transform md:scale-105 z-10 shadow-[0_0_30px_rgba(61,220,132,0.15)] bg-dark-900/90">
                    <div class="absolute top-[-20px] right-[-20px] opacity-5">
                        <i data-lucide="bot" class="w-48 h-48"></i>
                    </div>
                    <div class="flex items-center gap-4 mb-8 relative z-10">
                        <div class="w-14 h-14 bg-android rounded-full flex items-center justify-center glow">
                            <i data-lucide="bot" class="text-dark-900 w-8 h-8"></i>
                        </div>
                        <h3 class="text-4xl font-extrabold">Android</h3>
                    </div>
                    
                    <div class="space-y-8 relative z-10">
                        <div>
                            <h4 class="text-android font-bold flex items-center gap-2 mb-4 text-lg"><i data-lucide="check-circle-2" class="w-6 h-6"></i> Lo Mejor para Ti</h4>
                            <ul class="space-y-4 text-gray-300">
                                <li class="flex items-start gap-3"><i data-lucide="arrow-right" class="w-5 h-5 text-android mt-1 shrink-0"></i> <span><strong>Precios justos:</strong> Encuentras teléfonos excelentes y duraderos a precios muy accesibles. No hay que endeudarse.</span></li>
                                <li class="flex items-start gap-3"><i data-lucide="arrow-right" class="w-5 h-5 text-android mt-1 shrink-0"></i> <span><strong>Pantallas grandes a buen precio:</strong> Ideal si necesitas ver las letras y fotos en gran tamaño sin pagar extra.</span></li>
                                <li class="flex items-start gap-3"><i data-lucide="arrow-right" class="w-5 h-5 text-android mt-1 shrink-0"></i> <span><strong>Botones que entiendes:</strong> Un botón para ir atrás, otro para ver todo. Fácil y sin confusiones.</span></li>
                                <li class="flex items-start gap-3"><i data-lucide="arrow-right" class="w-5 h-5 text-android mt-1 shrink-0"></i> <span><strong>Familia conectada:</strong> Casi con seguridad, tus hijos o nietos tienen o saben usar Android.</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta Otras Marcas Caras (Opacada) -->
                <div class="glass-card p-8 md:p-10 rounded-3xl border-t-4 border-t-gray-600 reveal opacity-80 hover:opacity-100 transition-opacity bg-dark-800/50">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="w-14 h-14 bg-gray-700 rounded-full flex items-center justify-center">
                            <i data-lucide="smartphone" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-200">Otros Sistemas</h3>
                    </div>
                    
                    <div class="space-y-8">
                        <div>
                            <h4 class="text-red-400 font-bold flex items-center gap-2 mb-4 text-lg"><i data-lucide="alert-triangle" class="w-6 h-6"></i> Lo que no te dicen</h4>
                            <ul class="space-y-4 text-gray-300">
                                <li class="flex items-start gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1 shrink-0"></i> <span><strong>Muy Costosos:</strong> Suelen ser teléfonos de lujo. Si es tu primer equipo, es un gasto innecesariamente alto.</span></li>
                                <li class="flex items-start gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1 shrink-0"></i> <span><strong>Complicados de Configurar:</strong> Te piden cuentas, tarjetas de crédito y contraseñas complicadas desde el primer momento.</span></li>
                                <li class="flex items-start gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1 shrink-0"></i> <span><strong>Cables Distintos:</strong> Si vas de visita, probablemente nadie tenga el cargador especial que necesitan. Android usa un cargador universal.</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Asistente de IA (Manejo de Miedos) -->
    <section class="py-16 relative z-20">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="glass-card p-8 md:p-12 rounded-3xl border-android reveal text-center shadow-[0_0_30px_rgba(61,220,132,0.15)] bg-dark-800/80">
                <div class="w-16 h-16 bg-android/20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i data-lucide="sparkles" class="w-8 h-8 text-android"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold mb-4">¿Te da miedo empezar? Te ayudamos</h2>
                <p class="text-gray-400 mb-8 text-lg">Escribe abajo qué te preocupa de tener tu primer teléfono inteligente (por ejemplo: "Me da miedo borrar algo por error") y te diremos por qué estarás a salvo.</p>
                
                <div class="flex flex-col md:flex-row gap-4 justify-center mb-8">
                    <input type="text" id="user-context" placeholder="Ej: Me da miedo no saber contestar una llamada..." class="w-full md:w-2/3 px-6 py-4 rounded-xl bg-dark-900 border border-gray-600 focus:border-android focus:outline-none focus:ring-2 focus:ring-android/50 text-white placeholder-gray-500 transition-all text-lg shadow-inner">
                    <button id="gemini-btn" onclick="askGemini()" class="bg-android text-dark-900 font-extrabold px-8 py-4 rounded-xl hover:bg-android-light transition-all flex items-center justify-center gap-2 transform hover:scale-105 shadow-[0_0_15px_rgba(61,220,132,0.4)]">
                        <i data-lucide="send" class="w-5 h-5"></i> Preguntar
                    </button>
                </div>

                <div id="ai-response-container" class="hidden text-left bg-dark-900 p-6 rounded-2xl border border-gray-700 relative shadow-lg">
                    <div id="ai-loading" class="hidden flex-col items-center justify-center gap-3 text-android py-4">
                        <i data-lucide="loader-2" class="w-8 h-8 animate-spin"></i> 
                        <span class="text-sm font-semibold tracking-wider uppercase">Pensando la respuesta...</span>
                    </div>
                    <div id="ai-result" class="text-gray-300 leading-relaxed text-lg"></div>
                    <div id="ai-error" class="hidden text-red-400 flex items-center gap-2 bg-red-900/20 p-4 rounded-xl border border-red-500/30">
                        <i data-lucide="alert-circle" class="w-6 h-6"></i> Hubo un pequeño error. Por favor, intenta presionar el botón otra vez.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="py-20 relative overflow-hidden">
        <div class="absolute inset-0 bg-android opacity-10 blur-3xl rounded-full scale-150"></div>
        <div class="container mx-auto px-6 relative z-10 text-center glass-card max-w-4xl py-16 rounded-3xl reveal border-android">
            <i data-lucide="gift" class="w-16 h-16 text-android mx-auto mb-6"></i>
            <h2 class="text-4xl md:text-5xl font-extrabold mb-6">El Mundo Te Espera</h2>
            <p class="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                Llama a tus familiares en video, recibe fotos de tus nietos o busca recetas con tu voz. Todo es más fácil de lo que crees.
            </p>
            <button onclick="alert('¡Excelente decisión! Pide ayuda a un familiar o acércate a una tienda de tecnología y pide tu primer celular con Android. Te sorprenderá lo fácil y económico que es.')" class="bg-android text-dark-900 font-bold text-xl px-12 py-5 rounded-full hover:bg-white transition-all transform hover:scale-105 shadow-[0_0_30px_rgba(61,220,132,0.6)] inline-flex items-center gap-3">
                <i data-lucide="shopping-bag"></i> Consigue tu primer Android
            </button>
            <p class="mt-6 text-sm text-gray-400">Pide que te activen el "Modo Fácil" al comprarlo.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark-900 border-t border-gray-800 py-8 text-center text-gray-500">
        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center justify-between">
            <div class="flex items-center gap-2 mb-4 md:mb-0">
                <i data-lucide="bot" class="w-6 h-6 text-android"></i>
                <span class="font-bold text-white tracking-widest uppercase">Android <span class="text-android">Fácil</span></span>
            </div>
            <p>© 2026. Diseñado para acompañarte en tu primer paso digital.</p>
        </div>
    </footer>

    <script>
        // Inicializar iconos de Lucide
        lucide.createIcons();

        // Lógica de Animación al hacer Scroll (Intersection Observer)
        document.addEventListener('DOMContentLoaded', () => {
            const reveals = document.querySelectorAll('.reveal');

            const revealOnScroll = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        observer.unobserve(entry.target); // Solo animar una vez
                    }
                });
            }, {
                threshold: 0.15, // Activa cuando el 15% del elemento es visible
                rootMargin: "0px 0px -50px 0px"
            });

            reveals.forEach(reveal => {
                revealOnScroll.observe(reveal);
            });
        });

        // --- GEMINI API INTEGRATION ---
        const apiKey = ""; // API Key proveída por el entorno
        
        // Función auxiliar para realizar fetch con "Exponential Backoff" (reintentos)
        async function fetchWithRetry(url, options, retries = 5) {
            const delays = [1000, 2000, 4000, 8000, 16000];
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return await response.json();
                } catch (e) {
                    if (i === retries - 1) throw e;
                    await new Promise(res => setTimeout(res, delays[i]));
                }
            }
        }

        async function askGemini() {
            const inputEl = document.getElementById('user-context');
            const userInput = inputEl.value.trim();
            
            if (!userInput) {
                inputEl.focus();
                return;
            }

            // Elementos de la UI
            const containerEl = document.getElementById('ai-response-container');
            const loadingEl = document.getElementById('ai-loading');
            const resultEl = document.getElementById('ai-result');
            const errorEl = document.getElementById('ai-error');
            const btnEl = document.getElementById('gemini-btn');

            // Preparar UI para cargar
            containerEl.classList.remove('hidden');
            loadingEl.classList.remove('hidden');
            loadingEl.classList.add('flex');
            resultEl.innerHTML = '';
            errorEl.classList.add('hidden');
            btnEl.disabled = true;
            btnEl.classList.add('opacity-50', 'cursor-not-allowed');

            // Prompt estructurado para Gemini (Adaptado para principiantes)
            const userPrompt = `El usuario dice: "${userInput}".`;
            const systemInstruction = "Eres un guía experto en tecnología, muy amable, paciente y reconfortante. Estás hablando con un adulto mayor o una persona que NUNCA en su vida ha usado un teléfono inteligente. Tu objetivo es quitarle el miedo, darle tranquilidad y convencerle de que empezar con un celular Android es facilísimo y seguro. Responde directamente a su miedo o duda de forma sencilla, sin palabras técnicas difíciles (máximo 2 párrafos). Usa formato HTML básico (como <b> o <i>) para resaltar palabras clave tranquilizadoras.";

            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{ parts: [{ text: userPrompt }] }],
                    systemInstruction: { parts: [{ text: systemInstruction }] }
                };

                const data = await fetchWithRetry(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                // Extraer el texto de la respuesta
                const textResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "No te preocupes, la tecnología está para ayudarte. ¡Inténtalo de nuevo!";
                
                loadingEl.classList.add('hidden');
                loadingEl.classList.remove('flex');
                
                // Aplicar el resultado a la UI
                resultEl.innerHTML = `<span class="text-android font-bold block mb-2">Tu Asistente dice:</span> ${textResponse}`;
                
            } catch (error) {
                console.error("Error llamando a la API de Gemini:", error);
                loadingEl.classList.add('hidden');
                loadingEl.classList.remove('flex');
                errorEl.classList.remove('hidden');
            } finally {
                btnEl.disabled = false;
                btnEl.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // Permitir envío con la tecla "Enter" protegiendo contra null
        const userContextInput = document.getElementById('user-context');
        if (userContextInput) {
            userContextInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    askGemini();
                }
            });
        }
    </script>
</body>
</html>